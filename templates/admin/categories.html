{% extends "base.html" %}

{% block title %}Admin - Categories{% endblock %}

{% block content %}
<section class="admin-section">
  <div class="container">
    <div class="admin-header" style="display:flex; justify-content:space-between; align-items:flex-end; gap:1rem;">
      <div>
        <h1><i class="fas fa-tags"></i> Categories</h1>
        <p>Manage categories (list, edit, delete)</p>
      </div>
      <div>
        <a href="{{ url_for('admin.add_category_page') }}" class="btn btn-primary btn-sm"><i class="fas fa-plus"></i> Add Category</a>
      </div>
    </div>

    <!-- Minimal page: list only with edit/delete; add via dedicated page link -->

    <div class="admin-card" style="margin-top:1rem;">
      <div class="card-header">
        <h2><i class="fas fa-list"></i> Existing Categories</h2>
      </div>
      <div class="card-content">
        <div class="categories-list">
          {% if categories %}
            {% for c in categories %}
            <div class="category-item">
              <div class="category-info">
                <h4>{{ c.name }}</h4>
                <p>{{ c.products|length }} product(s)</p>
              </div>
              <div style="display:flex; gap:0.5rem;">
                <a href="{{ url_for('admin.edit_category_page', category_id=c.id) }}" class="btn btn-edit btn-sm" title="Edit"><i class="fas fa-edit"></i></a>
                <form method="POST" action="{{ url_for('admin.delete_category', category_id=c.id) }}">
                  <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Delete this category?');"><i class="fas fa-trash"></i></button>
                </form>
              </div>
            </div>
            {% endfor %}
          {% else %}
            <p class="empty-message">No categories found</p>
          {% endif %}
        </div>
      </div>
    </div>

    <div class="admin-footer" style="margin-top:1.5rem;">
      <a href="{{ url_for('shop.home') }}" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Back to Shop</a>
    </div>
  </div>
</section>
{% endblock %}
